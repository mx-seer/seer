import{i as k,h as R,U as te,v as m,a as ie,b as oe,g as Z,V as se,c as ue,H as ce,f as G,j as L,x as D,W as le,X as ae,Y as K,k as de,w as z,z as ve,Z as ne,_ as U,$ as he,a0 as Q,m as ge,a1 as _e,a2 as pe,a3 as Se,a4 as w,l as re,p as fe,a5 as q,q as Ee,a6 as we,a7 as Te,a8 as Ae,o as $e}from"./lIa7yOCe.js";function xe(e,r){return r}function Ce(e,r,f){for(var c=[],h=r.length,u,s=r.length,v=0;v<h;v++){let p=r[v];fe(p,()=>{if(u){if(u.pending.delete(p),u.done.add(p),u.pending.size===0){var l=e.outrogroups;F(U(u.done)),l.delete(u),l.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var i=c.length===0&&f!==null;if(i){var a=f,t=a.parentNode;Ae(t),t.append(a),e.items.clear()}F(r,!i)}else u={pending:new Set(r),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(u)}function F(e,r=!0){for(var f=0;f<e.length;f++)$e(e[f],r)}var ee;function ye(e,r,f,c,h,u=null){var s=e,v=new Map,i=(r&ne)!==0;if(i){var a=e;s=R?k(te(a)):a.appendChild(m())}R&&ie();var t=null,p=se(()=>{var o=f();return he(o)?o:o==null?[]:U(o)}),l,d=!0;function $(){n.fallback=t,Ie(n,l,s,r,c),t!==null&&(l.length===0?(t.f&w)===0?re(t):(t.f^=w,b(t,null,s)):fe(t,()=>{t=null}))}var N=oe(()=>{l=Z(p);var o=l.length;let O=!1;if(R){var x=ue(s)===ce;x!==(o===0)&&(s=G(),k(s),L(!1),O=!0)}for(var S=new Set,C=de,y=ve(),g=0;g<o;g+=1){R&&D.nodeType===le&&D.data===ae&&(s=D,O=!0,L(!1));var I=l[g],P=c(I,g),_=d?null:v.get(P);_?(_.v&&K(_.v,I),_.i&&K(_.i,g),y&&C.skipped_effects.delete(_.e)):(_=Ne(v,d?s:ee??(ee=m()),I,P,g,h,r,f),d||(_.e.f|=w),v.set(P,_)),S.add(P)}if(o===0&&u&&!t&&(d?t=z(()=>u(s)):(t=z(()=>u(ee??(ee=m()))),t.f|=w)),R&&o>0&&k(G()),!d)if(y){for(const[H,M]of v)S.has(H)||C.skipped_effects.add(M.e);C.oncommit($),C.ondiscard(()=>{})}else $();O&&L(!0),Z(p)}),n={effect:N,items:v,outrogroups:null,fallback:t};d=!1,R&&(s=D)}function Ie(e,r,f,c,h){var _,H,M,V,Y,j,B,X,J;var u=(c&Te)!==0,s=r.length,v=e.items,i=e.effect.first,a,t=null,p,l=[],d=[],$,N,n,o;if(u)for(o=0;o<s;o+=1)$=r[o],N=h($,o),n=v.get(N).e,(n.f&w)===0&&((H=(_=n.nodes)==null?void 0:_.a)==null||H.measure(),(p??(p=new Set)).add(n));for(o=0;o<s;o+=1){if($=r[o],N=h($,o),n=v.get(N).e,e.outrogroups!==null)for(const E of e.outrogroups)E.pending.delete(n),E.done.delete(n);if((n.f&w)!==0)if(n.f^=w,n===i)b(n,null,f);else{var O=t?t.next:i;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),T(e,t,n),T(e,n,O),b(n,O,f),t=n,l=[],d=[],i=t.next;continue}if((n.f&q)!==0&&(re(n),u&&((V=(M=n.nodes)==null?void 0:M.a)==null||V.unfix(),(p??(p=new Set)).delete(n))),n!==i){if(a!==void 0&&a.has(n)){if(l.length<d.length){var x=d[0],S;t=x.prev;var C=l[0],y=l[l.length-1];for(S=0;S<l.length;S+=1)b(l[S],x,f);for(S=0;S<d.length;S+=1)a.delete(d[S]);T(e,C.prev,y.next),T(e,t,C),T(e,y,x),i=x,t=y,o-=1,l=[],d=[]}else a.delete(n),b(n,i,f),T(e,n.prev,n.next),T(e,n,t===null?e.effect.first:t.next),T(e,t,n),t=n;continue}for(l=[],d=[];i!==null&&i!==n;)(a??(a=new Set)).add(i),d.push(i),i=i.next;if(i===null)continue}(n.f&w)===0&&l.push(n),t=n,i=n.next}if(e.outrogroups!==null){for(const E of e.outrogroups)E.pending.size===0&&(F(U(E.done)),(Y=e.outrogroups)==null||Y.delete(E));e.outrogroups.size===0&&(e.outrogroups=null)}if(i!==null||a!==void 0){var g=[];if(a!==void 0)for(n of a)(n.f&q)===0&&g.push(n);for(;i!==null;)(i.f&q)===0&&i!==e.fallback&&g.push(i),i=i.next;var I=g.length;if(I>0){var P=(c&ne)!==0&&s===0?f:null;if(u){for(o=0;o<I;o+=1)(B=(j=g[o].nodes)==null?void 0:j.a)==null||B.measure();for(o=0;o<I;o+=1)(J=(X=g[o].nodes)==null?void 0:X.a)==null||J.fix()}Ce(e,g,P)}}u&&Ee(()=>{var E,W;if(p!==void 0)for(n of p)(W=(E=n.nodes)==null?void 0:E.a)==null||W.apply()})}function Ne(e,r,f,c,h,u,s,v){var i=(s&pe)!==0?(s&Se)===0?ge(f,!1,!1):Q(f):null,a=(s&_e)!==0?Q(h):null;return{v:i,i:a,e:z(()=>(u(r,i??f,a??h,v),()=>{e.delete(c)}))}}function b(e,r,f){if(e.nodes)for(var c=e.nodes.start,h=e.nodes.end,u=r&&(r.f&w)===0?r.nodes.start:f;c!==null;){var s=we(c);if(u.before(c),c===h)return;c=s}}function T(e,r,f){r===null?e.effect.first=f:r.next=f,f===null?e.effect.last=r:f.prev=r}const A="/api";async function Pe(e){const r=new URLSearchParams;e!=null&&e.source&&r.set("source",e.source),e!=null&&e.min_score&&r.set("min_score",e.min_score.toString()),e!=null&&e.limit&&r.set("limit",e.limit.toString()),e!=null&&e.offset&&r.set("offset",e.offset.toString());const f=r.toString(),c=`${A}/opportunities${f?`?${f}`:""}`;return(await fetch(c)).json()}async function Re(e){const r=new URLSearchParams;e!=null&&e.source&&r.set("source",e.source),e!=null&&e.min_score&&r.set("min_score",e.min_score.toString());const f=r.toString(),c=`${A}/opportunities/stats${f?`?${f}`:""}`;return(await fetch(c)).json()}async function be(){return(await fetch(`${A}/sources`)).json()}async function He(e){return(await fetch(`${A}/sources/${e}/toggle`,{method:"POST"})).json()}async function Me(){return(await fetch(`${A}/prompts`)).json()}async function De(e){return(await fetch(`${A}/prompts/${e}/content`)).text()}async function ke(e){return(await fetch(`${A}/prompts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function me(){return(await fetch(`${A}/sources/fetch`,{method:"POST"})).json()}export{De as a,be as b,Pe as c,Re as d,ye as e,me as f,Me as g,ke as h,xe as i,He as t};
