import{f as g,a as c,c as lt}from"../chunks/BVX7dXtv.js";import{o as Mt}from"../chunks/DowC_kZ7.js";import{j as ot,p as Tt,s as F,a as Ct,b as s,e as a,t as S,g as e,c as Ft,d as O,r as t,f as ct}from"../chunks/ClognnWn.js";import{d as zt,s as l}from"../chunks/Dyg_a2vo.js";import{i as N}from"../chunks/CCjHch1u.js";import{l as Lt,m as Pt,r as Ut,e as W,i as X,j as nt}from"../chunks/DjcNkSeP.js";import{b as Vt,a as qt}from"../chunks/DpRXFKjw.js";function Bt(u,V,b){var o=u==null?"":""+u;return o===""?null:o}function Et(u,V,b,o,z,M){var h=u.__className;if(ot||h!==b||h===void 0){var m=Bt(b);(!ot||m!==u.getAttribute("class"))&&(m==null?u.removeAttribute("class"):u.className=m),u.__className=b}return M}var Gt=g('<div class="stats shadow w-full"><div class="stat"><div class="stat-title">Total Opportunities</div> <div class="stat-value text-primary"> </div></div> <div class="stat"><div class="stat-title">Today</div> <div class="stat-value text-secondary"> </div></div> <div class="stat"><div class="stat-title">Average Score</div> <div class="stat-value"> </div></div> <div class="stat"><div class="stat-title">Sources Active</div> <div class="stat-value"> </div></div></div>'),Ht=g("<option> </option>"),It=g('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),Jt=g('<div class="text-center p-8 text-base-content/60">No opportunities found. Check your sources or adjust filters.</div>'),Kt=g('<div class="text-sm text-base-content/60 max-w-md truncate"> </div>'),Qt=g('<div class="badge badge-ghost badge-sm"> </div>'),Rt=g('<div class="badge badge-ghost badge-sm"> </div>'),Wt=g('<tr><td><div> </div></td><td><div class="font-medium max-w-md truncate"> </div> <!></td><td><div class="badge badge-outline"> </div></td><td><div class="flex flex-wrap gap-1"><!> <!></div></td><td class="text-sm"> </td><td><a target="_blank" rel="noopener noreferrer" class="btn btn-ghost btn-xs">View â†’</a></td></tr>'),Xt=g('<div class="overflow-x-auto"><table class="table table-zebra"><thead><tr><th>Score</th><th>Title</th><th>Source</th><th>Signals</th><th>Detected</th><th></th></tr></thead><tbody></tbody></table></div>'),Yt=g('<div class="space-y-6"><!> <div class="card bg-base-100 shadow-xl"><div class="card-body"><h2 class="card-title">Filters</h2> <div class="flex flex-wrap gap-4"><div class="form-control"><label class="label" for="source-filter"><span class="label-text">Source</span></label> <select id="source-filter" class="select select-bordered"><option>All Sources</option><!></select></div> <div class="form-control"><label class="label" for="score-filter"><span class="label-text"> </span></label> <input id="score-filter" type="range" min="0" max="100" class="range range-primary"/></div></div></div></div> <div class="card bg-base-100 shadow-xl"><div class="card-body"><h2 class="card-title">Opportunities</h2> <!></div></div></div>');function ia(u,V){Tt(V,!0);let b=F(Ct([])),o=F(null),z=F(!0),M=F(""),h=F(0);Mt(async()=>{await m()});async function m(){O(z,!0);try{const[r,d]=await Promise.all([Lt({source:e(M)||void 0,min_score:e(h)||void 0,limit:50}),Pt()]);O(b,r,!0),O(o,d,!0)}catch(r){console.error("Failed to load data:",r)}O(z,!1)}function _t(r){return r>=70?"badge-success":r>=40?"badge-warning":"badge-error"}function ut(r){return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}var q=Yt(),Y=a(q);{var ft=r=>{var d=Gt(),p=a(d),j=s(a(p),2),x=a(j,!0);t(j),t(p);var i=s(p,2),f=s(a(i),2),y=a(f,!0);t(f),t(i);var k=s(i,2),P=s(a(k),2),v=a(P,!0);t(P),t(k);var A=s(k,2),D=s(a(A),2),T=a(D,!0);t(D),t(A),t(d),S((J,C)=>{l(x,e(o).total),l(y,e(o).today),l(v,J),l(T,C)},[()=>Math.round(e(o).average_score),()=>Object.keys(e(o).by_source).length]),c(r,d)};N(Y,r=>{e(o)&&r(ft)})}var B=s(Y,2),Z=a(B),$=s(a(Z),2),E=a($),L=s(a(E),2);L.__change=m;var G=a(L);G.value=G.__value="";var gt=s(G);{var bt=r=>{var d=lt(),p=ct(d);W(p,17,()=>Object.keys(e(o).by_source),X,(j,x)=>{var i=Ht(),f=a(i,!0);t(i);var y={};S(()=>{l(f,e(x)),y!==(y=e(x))&&(i.value=(i.__value=e(x))??"")}),c(j,i)}),c(r,d)};N(gt,r=>{e(o)&&r(bt)})}t(L),t(E);var tt=s(E,2),H=a(tt),at=a(H),ht=a(at);t(at),t(H);var I=s(H,2);Ut(I),I.__change=m,t(tt),t($),t(Z),t(B);var et=s(B,2),rt=a(et),mt=s(a(rt),2);{var pt=r=>{var d=It();c(r,d)},xt=r=>{var d=lt(),p=ct(d);{var j=i=>{var f=Jt();c(i,f)},x=i=>{var f=Xt(),y=a(f),k=s(a(y));W(k,21,()=>e(b),X,(P,v)=>{var A=Wt(),D=a(A),T=a(D),J=a(T,!0);t(T),t(D);var C=s(D),U=a(C),yt=a(U,!0);t(U);var wt=s(U,2);{var St=n=>{var _=Kt(),w=a(_,!0);t(_),S(()=>l(w,e(v).description)),c(n,_)};N(wt,n=>{e(v).description&&n(St)})}t(C);var K=s(C),st=a(K),jt=a(st,!0);t(st),t(K);var Q=s(K),it=a(Q),vt=a(it);W(vt,17,()=>e(v).signals.slice(0,3),X,(n,_)=>{var w=Qt(),Nt=a(w,!0);t(w),S(()=>l(Nt,e(_))),c(n,w)});var kt=s(vt,2);{var At=n=>{var _=Rt(),w=a(_);t(_),S(()=>l(w,`+${e(v).signals.length-3}`)),c(n,_)};N(kt,n=>{e(v).signals.length>3&&n(At)})}t(it),t(Q);var R=s(Q),Dt=a(R,!0);t(R);var dt=s(R),Ot=a(dt);t(dt),t(A),S((n,_)=>{Et(T,1,`badge ${n??""}`),l(J,e(v).score),nt(U,"title",e(v).title),l(yt,e(v).title),l(jt,e(v).source_type),l(Dt,_),nt(Ot,"href",e(v).source_url)},[()=>_t(e(v).score),()=>ut(e(v).detected_at)]),c(P,A)}),t(k),t(y),t(f),c(i,f)};N(p,i=>{e(b).length===0?i(j):i(x,!1)},!0)}c(r,d)};N(mt,r=>{e(z)?r(pt):r(xt,!1)})}t(rt),t(et),t(q),S(()=>l(ht,`Min Score: ${e(h)??""}`)),Vt(L,()=>e(M),r=>O(M,r)),qt(I,()=>e(h),r=>O(h,r)),c(u,q),Ft()}zt(["change"]);export{ia as component};
